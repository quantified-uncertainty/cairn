---
/**
 * Shared Footer component for Starlight sites.
 *
 * Usage in your app's astro.config.mjs:
 *   components: {
 *     Footer: './src/components/Footer.astro',
 *   }
 *
 * Then in your app's Footer.astro:
 *   ---
 *   import Footer from '@cairn/starlight/Footer.astro';
 *   ---
 *   <Footer version="1.0.0" {...Astro.props} />
 */

import EditLink from 'virtual:starlight/components/EditLink';
import LastUpdated from 'virtual:starlight/components/LastUpdated';
import Pagination from 'virtual:starlight/components/Pagination';
import config from 'virtual:starlight/user-config';
import CopyAsMarkdown from './CopyAsMarkdown.astro';

interface Props {
  version?: string;
  entry?: {
    data?: {
      title?: string;
    };
  };
}

const { version, entry } = Astro.props;
const pageTitle = entry?.data?.title || 'Untitled';
const pageUrl = Astro.url.href;
---

<footer class="sl-flex">
  <div class="meta sl-flex">
    <EditLink />
    <LastUpdated />
  </div>

  <CopyAsMarkdown pageTitle={pageTitle} pageUrl={pageUrl} />

  <Pagination />

  <div class="footer-info sl-flex">
    {version && <span class="version">v{version}</span>}
    {
      config.credits && (
        <a class="kudos sl-flex" href="https://starlight.astro.build">
          {Astro.locals.t('builtWithStarlight.label')}
        </a>
      )
    }
  </div>
</footer>

<style>
  footer {
    flex-direction: column;
    gap: 1.5rem;
  }
  .meta {
    gap: 0.75rem 3rem;
    justify-content: space-between;
    flex-wrap: wrap;
    margin-top: 3rem;
    font-size: var(--sl-text-sm);
    color: var(--sl-color-gray-3);
  }
  .meta > :global(p:only-child) {
    margin-inline-start: auto;
  }

  .footer-info {
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    margin: 1.5rem auto;
  }

  .version {
    font-size: var(--sl-text-xs);
    color: var(--sl-color-gray-4);
    font-family: var(--sl-font-mono);
  }

  .kudos {
    align-items: center;
    gap: 0.5em;
    font-size: var(--sl-text-xs);
    text-decoration: none;
    color: var(--sl-color-gray-3);
  }
  .kudos:hover {
    color: var(--sl-color-white);
  }
</style>
